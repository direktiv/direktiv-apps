id: validate
description: A simple 'validate' state workflow that checks an email
states:
- id: data
  type: noop
  transform: |
    {
      email: "trent.hilliam@vorteil.io"
    }
  transition: validate-email
- id: validate-email
  type: validate
  subject: .
  schema:
    type: object
    properties:
      email:
        type: string
        format: email
  catch:
  - error: direktiv.schema.*
    transition: email-not-valid 
  transition: email-valid
- id: email-not-valid
  type: noop
  transform: |
    {
      result: "Email is not valid."
    }
- id: email-valid
  type: noop
  transform: |
    {
      result: "Email is valid."
    }
