id: event-and
functions:
- id: greeter
  image: vorteil/greeting:v2
- id: solve
  image: vorteil/solve:v2
description: A simple 'eventAnd' that waits for events to be received.
states:
- id: event-and
  type: eventAnd
  timeout: PT1H
  events:
  - event: 
      type: greetingcloudevent
  - event: 
      type: solveexpressioncloudevent
  transition: greet
- id: greet
  type: action
  action:
    function: greeter
    input: .greetingcloudevent
  transform: |
    {
      greeting: .return.greeting,
      ceevent: .solveexpressioncloudevent
    }
  transition: solve
- id: solve
  type: action
  action:
    function: solve
    input: .ceevent
  transform: |
    {
      msggreeting: .greeting,
      solvedexpression: .return
    }